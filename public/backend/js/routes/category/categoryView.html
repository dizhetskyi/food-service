<div class="container">

  <h2>Categories</h2>
  <a href="#/category/create" class="btn btn-success">
    <i class="fa fa-plus"></i>
    Add category
  </a>

  <div ng-if="vm.loading" class="text-center">
    <i class="fa fa-2x fa-spinner fa-spin"></i>
  </div>

  <br>
  <br>

  <script type="text/ng-template" id="categories.html">
  
  <i ui-tree-handle  class="fa fa-arrows" style="color: #000; vertical-align: middle;"></i> 

  <div class="tree-node tree-node-content" style="display: inline-block; vertical-align: middle; min-width: 280px;">
    {{node.name}}
    <a class="btn btn-xs btn-info" href="#/category/{{node._id}}/update">update</a>
    <button class="btn btn-xs btn-danger" ng-click="vm.handleDelete(node._id, $event)">remove</a>
  </div>

  <ol ui-tree-nodes="" ng-model="node.children" ng-class="{hidden: collapsed}">
    <li ng-repeat="node in node.children" ui-tree-node ng-include="'categories.html'">
    </li>
  </ol>

  </script>

  <div class="categories" ui-tree="vm.tree" data-max-depth="2" style="overflow: hidden;">  
    <div class="is-sorting" ng-show="vm.isSorting">
      <span class="center">
        Sorting structure for you, wait ... <i class="fa fa-spin fa-spinner fa-2x"></i>
      </span>
    </div>
    <ol ui-tree-nodes ng-model="vm.categories">
      <li ng-repeat="node in vm.categories" ui-tree-node ng-include="'categories.html'"></li>
    </ol>
  </div>

</div>

<style>
  
  .btn {
      margin-right: 8px;
  }

  .angular-ui-tree-handle {
      background: #f8faff;
      border: 1px solid #dae2ea;
      color: #7c9eb2;
      padding: 10px 10px;
  }

  .angular-ui-tree-handle:hover {
      color: #438eb9;
      background: #f4f6f7;
      border-color: #dce2e8;
  }

  .angular-ui-tree-placeholder {
      background: #f0f9ff;
      border: 2px dashed #bed2db;
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
  }

  tr.angular-ui-tree-empty {
      height:100px
  }

  .group-title {
      background-color: #687074 !important;
      color: #FFF !important;
  }


  /* --- Tree --- */
  .tree-node {
      border: 1px solid #dae2ea;
      background: #f8faff;
      color: #7c9eb2;
  }

  .nodrop {
      background-color: #f2dede;
  }

  .tree-node-content {
      margin: 10px;
  }
  .tree-handle {
      padding: 10px;
      background: #428bca;
      color: #FFF;
      margin-right: 10px;
  }

  .angular-ui-tree-handle:hover {
  }

  .angular-ui-tree-placeholder {
      background: #f0f9ff;
      border: 2px dashed #bed2db;
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
  }

  .categories {
    position: relative;
  }
  .categories .is-sorting {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    top: 0;
    background: rgba(255,255,255, .8);
    z-index: 2;

  }
  .categories .is-sorting .center {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    text-align: center;
    margin-top: -10px;
    font-size: 14px;
  }
  .categories .is-sorting .center i {
    vertical-align: middle;
  }

</style>